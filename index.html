<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ResearchCamp</title>
<link rel="icon" href="assets/ResearchCamp-logo.png" type="image/png">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;0,900;1,400;1,700&family=Manrope:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }

:root {
  --cream:   #f7f3ee;
  --paper:   #f0ebe2;
  --ink:     #16120d;
  --ink2:    #3d3628;
  --ember:   #e8560a;
  --ember2:  #f5812e;
  --ember-g: #ffc87a;
  --muted:   rgba(22,18,13,0.4);
  --faint:   rgba(22,18,13,0.07);
}

html, body {
  width:100%; min-height:100%;
  background: var(--cream);
  color: var(--ink);
  font-family: 'Manrope', sans-serif;
  overflow: auto;
  cursor: default;
}

/* ── noise texture ── */
body::after {
  content:'';
  position:fixed; inset:0;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='300'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.75' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='300' height='300' filter='url(%23n)' opacity='0.03'/%3E%3C/svg%3E");
  pointer-events:none; z-index:999;
}

/* ── canvas ── */
#canvas {
  position:fixed; inset:0; z-index:0;
}

/* ── warm glow behind center ── */
.glow {
  position:fixed;
  width:700px; height:700px;
  left:50%; top:50%;
  transform:translate(-50%,-50%);
  background: radial-gradient(circle, rgba(232,86,10,0.07) 0%, rgba(247,243,238,0) 70%);
  border-radius:50%;
  pointer-events:none; z-index:1;
  animation: glowbeat 5s ease-in-out infinite;
}
@keyframes glowbeat {
  0%,100%{ transform:translate(-50%,-50%) scale(1); opacity:0.7; }
  50%{ transform:translate(-50%,-50%) scale(1.15); opacity:1; }
}

/* ── layout ── */
.shell {
  position:relative; z-index:10;
  min-height:100vh;
  display:grid;
  grid-template-rows: auto 1fr auto;
  padding: 40px 52px;
  max-width:1400px;
  margin:0 auto;
}

/* ── header ── */
header {
  display:flex;
  justify-content:space-between;
  align-items:center;
  opacity:0;
  animation: up 0.9s 0.2s ease forwards;
}

.company-brand {
  display:flex; align-items:center; gap:14px;
}

.rc-badge {
  width:64px; height:64px;
  background:transparent;
  border-radius:6px;
  display:flex; align-items:center; justify-content:center;
  flex-shrink:0;
}
.rc-badge svg { width:72px; height:72px; }
.rc-badge img { width:64px; height:64px; object-fit:contain; border-radius:6px; }

.rc-title { height:20px; display:block; object-fit:contain; }

.rc-name {
  font-family:'Manrope', sans-serif;
  font-size:13px;
  font-weight:600;
  letter-spacing:0.04em;
  background: linear-gradient(135deg, #0800e5 0%, #e500ac 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.rc-sub {
  font-size:10px;
  font-weight:400;
  color:var(--muted);
  letter-spacing:0.06em;
  display:block;
  margin-top:1px;
}

.nav-tag {
  font-size:11px;
  font-weight:500;
  letter-spacing:0.18em;
  text-transform:uppercase;
  color: var(--ember);
  border:1.5px solid var(--ember);
  padding:6px 16px;
  border-radius:50px;
  opacity:0.85;
}

/* ── center ── */
.center {
  display:grid;
  grid-template-columns: 1fr 1fr;
  align-items:center;
  gap:60px;
}

/* Left column */
.left {
  display:flex;
  flex-direction:column;
  gap:0;
}

.eyebrow {
  display:inline-flex;
  align-items:center;
  gap:9px;
  font-size:11px;
  font-weight:600;
  letter-spacing:0.22em;
  text-transform:uppercase;
  color:var(--ember);
  margin-bottom:28px;
  opacity:0;
  animation: up 0.8s 0.5s ease forwards;
}
.eyebrow-line {
  width:28px; height:1.5px;
  background:var(--ember);
  border-radius:2px;
}

.product-name {
  font-family:'Playfair Display', serif;
  font-size:clamp(72px,9vw,136px);
  font-weight:900;
  line-height:0.88;
  letter-spacing:-0.03em;
  color:var(--ink);
  opacity:0;
  animation: up 1s 0.65s ease forwards;
  position:relative;
}

.product-name .t-stroke {
  display:inline;
  color:transparent;
  -webkit-text-stroke: 2.5px var(--ink);
  font-style:italic;
}

.product-tagline {
  font-size:13px;
  font-weight:300;
  font-style:italic;
  color:var(--muted);
  margin-top:12px;
  opacity:0;
  animation: up 0.8s 0.75s ease forwards;
}

.coming-tag {
  display:inline-flex;
  align-items:center;
  gap:8px;
  background:var(--ink);
  color:var(--cream);
  font-size:11px;
  font-weight:600;
  letter-spacing:0.18em;
  text-transform:uppercase;
  padding:8px 18px;
  border-radius:4px;
  margin-top:28px;
  width:fit-content;
  opacity:0;
  animation: up 0.8s 0.85s ease forwards;
}
.coming-dot {
  width:5px; height:5px;
  border-radius:50%;
  background:var(--ember2);
  animation: blink 1.8s ease-in-out infinite;
}
@keyframes blink { 0%,100%{opacity:1;} 50%{opacity:0.2;} }

.desc {
  font-size:clamp(13px,1.3vw,15px);
  font-weight:300;
  line-height:1.85;
  color:var(--muted);
  max-width:420px;
  margin-top:32px;
  opacity:0;
  animation: up 0.9s 1s ease forwards;
}
.desc strong { color:var(--ink2); font-weight:500; }

/* Pillars */
.pillars {
  display:flex;
  gap:12px;
  margin-top:36px;
  flex-wrap:wrap;
  opacity:0;
  animation: up 0.9s 1.15s ease forwards;
}
.pillar {
  font-size:11px;
  font-weight:500;
  letter-spacing:0.08em;
  text-transform:uppercase;
  color:var(--ink2);
  padding:7px 15px;
  border-radius:3px;
  background:var(--faint);
  border:1px solid rgba(22,18,13,0.1);
  transition:background 0.25s, border-color 0.25s, color 0.25s;
  cursor:pointer;
  text-decoration:none;
  display:inline-block;
}
.pillar:hover {
  background:var(--ember);
  border-color:var(--ember);
  color:#fff;
}

/* Right column – visual box */
.right {
  position:relative;
  display:flex;
  align-items:center;
  justify-content:center;
  opacity:0;
  animation: fadeIn 1.2s 0.9s ease forwards;
}

.visual-frame {
  position:relative;
  width:100%;
  max-width:440px;
  aspect-ratio:1;
  border:1px solid rgba(22,18,13,0.1);
  border-radius:16px;
  background: var(--paper);
  overflow:hidden;
  box-shadow: 0 30px 80px rgba(22,18,13,0.08), 0 4px 16px rgba(22,18,13,0.04);
}

#brainCanvas {
  width:100%; height:100%;
  display:block;
}

/* Corner labels */
.frame-label {
  position:absolute;
  font-size:9px;
  font-weight:600;
  letter-spacing:0.18em;
  text-transform:uppercase;
  color:var(--muted);
  text-decoration:none;
  cursor:pointer;
  transition:color 0.25s, text-shadow 0.25s;
}
.frame-label:hover {
  color:var(--ember);
  text-shadow:0 0 8px rgba(232,86,10,0.3);
}
.frame-label.tl { top:16px; left:18px; }
.frame-label.tr { top:16px; right:18px; text-align:right; }
.frame-label.bl { bottom:16px; left:18px; }
.frame-label.br { bottom:16px; right:18px; text-align:right; }

.frame-label span {
  color:var(--ember);
}

/* Floating badge on frame */
.frame-badge {
  position:absolute;
  bottom:16px;
  left:50%;
  transform:translateX(-50%);
  background:#fff;
  border:1px solid rgba(22,18,13,0.1);
  border-radius:50px;
  padding:9px 16px;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:8px;
  max-width:180px;
  box-shadow:0 8px 32px rgba(22,18,13,0.1);
  text-align:center;
  flex-wrap:wrap;
}
.frame-badge-dot {
  width:6px; height:6px;
  border-radius:50%;
  background:var(--ember);
  animation:blink 2s ease-in-out infinite;
}
.frame-badge-text {
  font-size:11px;
  font-weight:600;
  color:var(--ink2);
  letter-spacing:0.06em;
}

/* ── footer ── */
footer {
  display:flex;
  justify-content:space-between;
  align-items:center;
  opacity:0;
  animation: up 0.9s 1.4s ease forwards;
  padding-top:32px;
}

.email-block { display:flex; flex-direction:column; gap:8px; }
.email-label {
  font-size:10px;
  font-weight:600;
  letter-spacing:0.18em;
  text-transform:uppercase;
  color:var(--muted);
}
.email-row {
  display:flex;
  border:1.5px solid rgba(22,18,13,0.18);
  border-radius:6px;
  overflow:hidden;
  transition:border-color 0.3s, box-shadow 0.3s;
}
.email-row:focus-within {
  border-color:var(--ember);
  box-shadow:0 0 0 3px rgba(232,86,10,0.1);
}
.email-input {
  background:transparent;
  border:none; outline:none;
  font-family:'Manrope', sans-serif;
  font-size:13px;
  font-weight:400;
  color:var(--ink);
  padding:10px 16px;
  width:220px;
}
.email-input::placeholder { color:var(--muted); }
.email-btn {
  background:var(--ember);
  border:none;
  font-family:'Manrope', sans-serif;
  font-size:11px;
  font-weight:700;
  letter-spacing:0.14em;
  text-transform:uppercase;
  color:#fff;
  padding:10px 20px;
  cursor:pointer;
  transition:background 0.2s;
  flex-shrink:0;
}
.email-btn:hover { background:var(--ember2); }
.success-note {
  font-size:12px;
  font-weight:500;
  color:var(--ember);
  letter-spacing:0.04em;
  display:none;
  margin-top:2px;
}

.footer-right {
  display:flex;
  flex-direction:column;
  align-items:flex-end;
  gap:5px;
}
.footer-by {
  font-size:11px;
  color:var(--muted);
  letter-spacing:0.06em;
}
.footer-by strong {
  color:var(--ink2);
  font-weight:600;
}
.footer-copy {
  font-size:10px;
  color:rgba(22,18,13,0.25);
  letter-spacing:0.05em;
}

/* ── animations ── */
@keyframes up {
  from { opacity:0; transform:translateY(18px); }
  to   { opacity:1; transform:translateY(0); }
}
@keyframes fadeIn {
  from { opacity:0; }
  to   { opacity:1; }
}

/* ── responsive ── */
@media (max-width: 1200px) {
  .center { gap:40px; }
  .visual-frame { max-width:380px; }
}

@media (max-width: 1024px) {
  .shell { padding:35px 40px; }
  .center { gap:35px; }
  .product-name { font-size:clamp(56px,8vw,100px); }
  .desc { max-width:360px; }
  .visual-frame { max-width:340px; }
}

@media (max-width: 880px) {
  .shell { padding:30px 30px; }
  .center { grid-template-columns:1fr; gap:30px; }
  .right { display:flex; justify-content:center; }
  .product-name { font-size:clamp(48px,10vw,80px); }
  .desc { max-width:100%; font-size:14px; }
  .email-input { width:180px; }
  .visual-frame { max-width:100%; min-height:300px; aspect-ratio:auto; }
}

@media (max-width: 640px) {
  .shell { padding:20px 16px; }
  header { flex-direction:column; gap:16px; align-items:flex-start; }
  .nav-tag { padding:5px 12px; font-size:10px; }
  
  .center { gap:20px; }
  .product-name { font-size:clamp(40px,12vw,64px); line-height:0.95; }
  .eyebrow { margin-bottom:20px; font-size:10px; }
  .coming-tag { margin-top:20px; padding:6px 14px; font-size:10px; }
  .desc { margin-top:20px; font-size:13px; line-height:1.7; }
  
  .pillars { gap:8px; margin-top:24px; }
  .pillar { font-size:10px; padding:6px 12px; }
  
  .right { display:flex; justify-content:center; }
  .visual-frame { max-width:100%; min-height:280px; aspect-ratio:auto; }
  
  footer { flex-direction:column; align-items:flex-start; gap:20px; }
  .footer-right { align-items:flex-start; }
  .email-row { width:100%; }
  .email-input { width:calc(100% - 80px); }
  .email-btn { padding:10px 16px; font-size:10px; }
}

@media (max-width: 480px) {
  .shell { padding:16px 12px; }
  .rc-name { font-size:12px; }
  .rc-sub { font-size:9px; }
  
  .center { gap:16px; }
  .product-name { font-size:clamp(32px,10vw,52px); }
  .eyebrow { font-size:9px; }
  .coming-tag { font-size:9px; padding:5px 12px; }
  .desc { font-size:12px; margin-top:16px; }
  
  .pillars { gap:6px; margin-top:16px; flex-wrap:wrap; }
  .pillar { font-size:9px; padding:5px 10px; }
  
  .right { display:flex; justify-content:center; }
  .visual-frame { max-width:100%; min-height:250px; aspect-ratio:auto; }
  
  footer { gap:16px; }
  .email-label { font-size:9px; }
  .email-input { font-size:12px; padding:8px 12px; }
  .email-btn { padding:8px 12px; font-size:9px; }
}
</style>
</head>
<body>

<canvas id="canvas"></canvas>
<div class="glow"></div>

<div class="shell">

  <!-- Header -->
  <header>
    <div class="company-brand">
      <div class="rc-badge">
        <img src="assets/ResearchCamp-logo1.png" alt="ResearchCamp logo" />
      </div>
      <div>
        <span class="rc-name">ResearchCamp</span>
        <span class="rc-sub">Digital Professional Services</span>
      </div>
    </div>
    <span class="nav-tag">Coming Soon</span>
  </header>

  <!-- Center -->
  <div class="center">

    <!-- Left -->
    <div class="left">
      <div class="eyebrow">
        <span class="eyebrow-line"></span>
        Our Flagship Product
      </div>

      <div class="product-name">
        Think <span class="t-stroke">a</span>
      </div>

      <p class="product-tagline">-----where research thinks forward.-----</p>

      <div class="coming-tag">
        <span class="coming-dot"></span>
        Launching Soon
      </div>

      <p class="desc">
        <strong>Thinka</strong> is a digital professional services platform that bridges
        <strong>researchers</strong> and <strong>industry clients</strong> for collaborative
        research &amp; development projects — built by <strong>ResearchCamp</strong>.
      </p>

      <div class="pillars">
        <a class="pillar" href="thinka.htm#rd">R&amp;D Projects</a>
        <a class="pillar" href="thinka.htm#researchers">Researchers</a>
        <a class="pillar" href="thinka.htm#industry">Industry Clients</a>
        <a class="pillar" href="thinka.htm#collab">Collaboration</a>
      </div>
    </div>

    <!-- Right – animated visual -->
    <div class="right">
      <div class="visual-frame">
        <canvas id="brainCanvas"></canvas>
        <a class="frame-label tl" href="thinka.htm#researchers" data-tab="researchers">Researchers</a>
        <a class="frame-label tr" href="thinka.htm#industry" data-tab="industry">Industry <span>Clients</span></a>
        <a class="frame-label bl" href="thinka.htm#rd" data-tab="rd"><span>R&amp;D</span> Projects</a>
        <a class="frame-label br" href="thinka.htm#collab" data-tab="collab">Thinka <span>✦</span></a>
        <div class="frame-badge">
          <span class="frame-badge-dot"></span>
          <span class="frame-badge-text">Bridging Ideas &amp; Industry</span>
        </div>
      </div>
    </div>

  </div>

  <!-- Footer -->
  <footer>
    <div class="email-block">
      <span class="email-label">Get early access to Thinka</span>
      <div class="email-row" id="emailRow">
        <input class="email-input" id="emailIn" type="email" placeholder="your@email.com" />
        <button class="email-btn" id="emailBtn">Notify Me</button>
      </div>
      <span class="success-note" id="successNote">✦ You're on the list — we'll reach out soon.</span>
    </div>

    <div class="footer-right">
      <span class="footer-by">A product by <strong>ResearchCamp</strong></span>
      <span class="footer-copy">© 2026 ResearchCamp. All rights reserved.</span>
    </div>
  </footer>

</div>

<script>
// ═══════════════════════════════════════════════
// 1. BACKGROUND – soft floating dots......
// ═══════════════════════════════════════════════
(function() {
  const cv = document.getElementById('canvas');
  const cx = cv.getContext('2d');
  let W, H;

  function resize() {
    W = cv.width = window.innerWidth;
    H = cv.height = window.innerHeight;
  }

  const dots = Array.from({length:40}, () => ({
    x: Math.random() * window.innerWidth,
    y: Math.random() * window.innerHeight,
    r: Math.random() * 2 + 0.5,
    vx: (Math.random() - 0.5) * 0.2,
    vy: (Math.random() - 0.5) * 0.2,
    a: Math.random() * 0.15 + 0.05,
  }));

  function frame() {
    cx.clearRect(0, 0, W, H);
    dots.forEach(d => {
      d.x += d.vx; d.y += d.vy;
      if (d.x < 0) d.x = W; if (d.x > W) d.x = 0;
      if (d.y < 0) d.y = H; if (d.y > H) d.y = 0;
      cx.beginPath();
      cx.arc(d.x, d.y, d.r, 0, Math.PI*2);
      cx.fillStyle = `rgba(232,86,10,${d.a})`;
      cx.fill();
    });
    requestAnimationFrame(frame);
  }

  window.addEventListener('resize', resize);
  resize(); frame();
})();

// ═══════════════════════════════════════════════
// 2. BRAIN CANVAS – network visualization
// ═══════════════════════════════════════════════
(function() {
  const cv = document.getElementById('brainCanvas');
  const cx = cv.getContext('2d');
  let W, H, nodes, t = 0;

  function resize() {
    const box = cv.parentElement.getBoundingClientRect();
    W = cv.width = box.width * window.devicePixelRatio;
    H = cv.height = box.height * window.devicePixelRatio;
    cv.style.width = box.width + 'px';
    cv.style.height = box.height + 'px';
    cx.scale(window.devicePixelRatio, window.devicePixelRatio);
    makeNodes(box.width, box.height);
  }

  // Node types: researcher (blue), industry (amber), hub (ember/center)
  function makeNodes(w, h) {
    nodes = [];
    const cx2 = w / 2, cy2 = h / 2;

    // Padding and label safety to keep nodes/labels inside the visual frame
    const padding = Math.max(12, Math.min(40, Math.round(Math.min(w, h) * 0.06)));
    const labelOffset = 16; // extra space for labels below nodes
    let maxAllowedDistX = cx2 - padding - 40;
    let maxAllowedDistY = cy2 - padding - 40;
    let maxAllowedDist = Math.min(maxAllowedDistX, maxAllowedDistY);
    if (maxAllowedDist < 40) maxAllowedDist = Math.min(w, h) * 0.35;

    // Central hub — Thinka
    nodes.push({ x: cx2, y: cy2, type: 'hub', r: 10, label: 'Thinka',
      ox: cx2, oy: cy2, phase: 0, speed: 0 });

    // Researcher nodes (left cluster)
    const rNames = ['Dr. Chen', 'Prof. Ali', 'Dr. Park', 'Ms. Reyes', 'Dr. Obi'];
    rNames.forEach((n,i) => {
      const angle = Math.PI + (i / (rNames.length-1) - 0.5) * Math.PI * 0.65;
      // Base radial distance but clamp to available space
      const baseDist = w * 0.38 + Math.random() * 25;
      const dist  = Math.min(baseDist, maxAllowedDist * 0.95);
      let bx = cx2 + Math.cos(angle) * dist;
      let by = cy2 + Math.sin(angle) * dist * 0.85;
      // Clamp positions so nodes and their labels remain visible
      bx = Math.max(padding, Math.min(w - padding, bx));
      by = Math.max(padding + 6, Math.min(h - padding - (labelOffset + 12), by));
      nodes.push({ x:bx, y:by, type:'researcher', r:5.5, label:n,
        ox:bx, oy:by, phase:Math.random()*Math.PI*2, speed:0.4+Math.random()*0.3 });
    });

    // Industry nodes (right cluster)
    const iNames = ['BioTech Co.', 'NovaCorp', 'EnergyLab', 'ManuTech', 'DataSys'];
    iNames.forEach((n,i) => {
      const angle = 0 + (i / (iNames.length-1) - 0.5) * Math.PI * 0.65;
      const baseDist = w * 0.38 + Math.random() * 25;
      const dist  = Math.min(baseDist, maxAllowedDist * 0.95);
      let bx = cx2 + Math.cos(angle) * dist;
      let by = cy2 + Math.sin(angle) * dist * 0.85;
      bx = Math.max(padding, Math.min(w - padding, bx));
      by = Math.max(padding + 6, Math.min(h - padding - (labelOffset + 12), by));
      nodes.push({ x:bx, y:by, type:'industry', r:5.5, label:n,
        ox:bx, oy:by, phase:Math.random()*Math.PI*2, speed:0.35+Math.random()*0.3 });
    });
  }

  function hexToRgb(hex) {
    const r = parseInt(hex.slice(1,3),16);
    const g = parseInt(hex.slice(3,5),16);
    const b = parseInt(hex.slice(5,7),16);
    return `${r},${g},${b}`;
  }

  const COLORS = {
    researcher: '#4a7fc1',
    industry:   '#e8560a',
    hub:        '#16120d',
  };

  function easeInOut(t) { return t < 0.5 ? 2*t*t : -1+(4-2*t)*t; }

  // Animated "pulse" traveling along edges
  const pulses = [];
  let pulseTimer = 0;

  // Payments travel from industry -> researcher after a doc pulse completes
  const payments = [];
  function spawnPayment(fromNode, toNode) {
    payments.push({ from: fromNode, to: toNode, prog: 0, speed: 0.012 });
  }

  function drawPayment(p) {
    const prog = p.prog;
    const hub = nodes[0];
    const ind = p.from; // industry node
    const r = p.to;     // researcher node

    let x = ind.x, y = ind.y;
    if (prog < 0.5) {
      // industry -> hub (follow same curve used for hub->industry but reversed)
      const t = prog * 2;
      const sx = ind.x, sy = ind.y;
      const ex = hub.x, ey = hub.y;
      const mx = (hub.x + ind.x) / 2 + 15;
      const my = (hub.y + ind.y) / 2;
      x = (1-t)*(1-t)*sx + 2*(1-t)*t*mx + t*t*ex;
      y = (1-t)*(1-t)*sy + 2*(1-t)*t*my + t*t*ey;
    } else {
      // hub -> researcher (follow same curve used for researcher->hub but reversed)
      const t = (prog - 0.5) * 2;
      const sx = hub.x, sy = hub.y;
      const ex = r.x, ey = r.y;
      const mx = (r.x + hub.x) / 2 - 15;
      const my = (r.y + hub.y) / 2;
      x = (1-t)*(1-t)*sx + 2*(1-t)*t*mx + t*t*ex;
      y = (1-t)*(1-t)*sy + 2*(1-t)*t*my + t*t*ey;
    }

    // coin shadow
    const shadow = cx.createRadialGradient(x+1,y+2,0, x+1,y+2,12);
    shadow.addColorStop(0, 'rgba(0,0,0,0.12)');
    shadow.addColorStop(1, 'rgba(0,0,0,0)');
    cx.fillStyle = shadow;
    cx.beginPath(); cx.ellipse(x, y+3, 8, 3, 0, 0, Math.PI*2); cx.fill();

    // coin body
    const cg = cx.createRadialGradient(x-2,y-2,1, x,y,10);
    cg.addColorStop(0, '#fff7d9');
    cg.addColorStop(1, '#d9a400');
    cx.fillStyle = cg;
    cx.beginPath(); cx.arc(x, y, 6, 0, Math.PI*2); cx.fill();
    cx.strokeStyle = 'rgba(0,0,0,0.12)'; cx.lineWidth = 0.8; cx.stroke();

    // coin symbol: dollar sign
    cx.fillStyle = 'rgba(0,0,0,0.6)';
    cx.font = '600 8px Manrope, sans-serif';
    cx.textAlign = 'center'; cx.textBaseline = 'middle';
    cx.fillText('$', x, y+0.5);
  }

  function spawnPulse() {
    // Pick a random researcher and a random industry node to connect through hub
    const researchers = nodes.filter(n => n.type === 'researcher');
    const industries  = nodes.filter(n => n.type === 'industry');
    const hub = nodes[0];
    const r = researchers[Math.floor(Math.random()*researchers.length)];
    const ind = industries[Math.floor(Math.random()*industries.length)];
    pulses.push({ from: r, mid: hub, to: ind, prog: 0, speed: 0.008 });
  }

  function drawPulse(p) {
    const prog = p.prog;
    // First half: from → hub
    let x, y;
    if (prog < 0.5) {
      const t2 = prog * 2;
      x = p.from.x + (p.mid.x - p.from.x) * t2;
      y = p.from.y + (p.mid.y - p.from.y) * t2;
    } else {
      const t2 = (prog - 0.5) * 2;
      x = p.mid.x + (p.to.x - p.mid.x) * t2;
      y = p.mid.y + (p.to.y - p.mid.y) * t2;
    }
    
    // Draw document icon instead of pulse
    const docWidth = 7;
    const docHeight = 9;
    
    // Document shadow/glow
    const shadowGrad = cx.createRadialGradient(x,y,0, x,y,10);
    shadowGrad.addColorStop(0, 'rgba(232,86,10,0.15)');
    shadowGrad.addColorStop(1, 'rgba(232,86,10,0)');
    cx.fillStyle = shadowGrad;
    cx.fillRect(x-10, y-10, 20, 20);
    
    // Document background
    cx.fillStyle = 'rgba(232,86,10,0.9)';
    cx.fillRect(x - docWidth/2, y - docHeight/2, docWidth, docHeight);
    
    // Document border
    cx.strokeStyle = 'rgba(255,255,255,0.6)';
    cx.lineWidth = 0.8;
    cx.strokeRect(x - docWidth/2, y - docHeight/2, docWidth, docHeight);
    
    // Document lines (text representation)
    cx.strokeStyle = 'rgba(255,255,255,0.5)';
    cx.lineWidth = 0.5;
    const lineY1 = y - docHeight/2 + 2.5;
    const lineY2 = y - docHeight/2 + 4.5;
    const lineY3 = y - docHeight/2 + 6.5;
    cx.beginPath();
    cx.moveTo(x - docWidth/2 + 1, lineY1);
    cx.lineTo(x + docWidth/2 - 1, lineY1);
    cx.stroke();
    cx.beginPath();
    cx.moveTo(x - docWidth/2 + 1, lineY2);
    cx.lineTo(x + docWidth/2 - 1, lineY2);
    cx.stroke();
    cx.beginPath();
    cx.moveTo(x - docWidth/2 + 1, lineY3);
    cx.lineTo(x + docWidth/2 - 1.5, lineY3);
    cx.stroke();
  }

  function frame() {
    t += 0.012;
    pulseTimer++;
    if (pulseTimer > 90) { spawnPulse(); pulseTimer = 0; }

    const bw = cv.width / window.devicePixelRatio;
    const bh = cv.height / window.devicePixelRatio;

    cx.clearRect(0, 0, bw, bh);

    // Background subtle grid
    cx.strokeStyle = 'rgba(22,18,13,0.04)';
    cx.lineWidth = 1;
    const step = 32;
    for (let x2 = 0; x2 < bw; x2 += step) {
      cx.beginPath(); cx.moveTo(x2,0); cx.lineTo(x2,bh); cx.stroke();
    }
    for (let y2 = 0; y2 < bh; y2 += step) {
      cx.beginPath(); cx.moveTo(0,y2); cx.lineTo(bw,y2); cx.stroke();
    }

    // Animate node positions (gentle float)
    nodes.forEach(n => {
      if (n.type !== 'hub') {
        n.x = n.ox + Math.sin(t * n.speed + n.phase) * 5;
        n.y = n.oy + Math.cos(t * n.speed * 0.7 + n.phase) * 4;
      }
    });

    const hub = nodes[0];
    const researchers = nodes.filter(n=>n.type==='researcher');
    const industries  = nodes.filter(n=>n.type==='industry');

    // Draw edges: researcher → hub
    researchers.forEach(r => {
      const grad = cx.createLinearGradient(r.x,r.y, hub.x,hub.y);
      grad.addColorStop(0,'rgba(74,127,193,0.18)');
      grad.addColorStop(1,'rgba(22,18,13,0.08)');
      cx.beginPath();
      cx.moveTo(r.x, r.y);
      // slight curve
      const mx = (r.x + hub.x)/2 - 15;
      const my = (r.y + hub.y)/2;
      cx.quadraticCurveTo(mx, my, hub.x, hub.y);
      cx.strokeStyle = grad;
      cx.lineWidth = 1.2;
      cx.stroke();
    });

    // Draw edges: hub → industry
    industries.forEach(ind => {
      const grad = cx.createLinearGradient(hub.x,hub.y, ind.x,ind.y);
      grad.addColorStop(0,'rgba(22,18,13,0.08)');
      grad.addColorStop(1,'rgba(232,86,10,0.2)');
      cx.beginPath();
      cx.moveTo(hub.x, hub.y);
      const mx = (hub.x + ind.x)/2 + 15;
      const my = (hub.y + ind.y)/2;
      cx.quadraticCurveTo(mx, my, ind.x, ind.y);
      cx.strokeStyle = grad;
      cx.lineWidth = 1.2;
      cx.stroke();
    });

    // Update & draw pulses
    for (let i = pulses.length-1; i >= 0; i--) {
      pulses[i].prog += pulses[i].speed;
      if (pulses[i].prog >= 1) { 
        // when a doc pulse reaches industry, spawn a payment back to researcher
        spawnPayment(pulses[i].to, pulses[i].from);
        pulses.splice(i,1); 
        continue; 
      }
      drawPulse(pulses[i]);
    }

    // Update & draw payments (industry -> researcher)
    for (let i = payments.length-1; i >= 0; i--) {
      payments[i].prog += payments[i].speed;
      if (payments[i].prog >= 1) {
        // mark recipient (researcher) with a short highlight
        payments[i].to.lastPaymentTime = Date.now();
        payments.splice(i,1);
        continue;
      }
      drawPayment(payments[i]);
    }

    // Draw nodes
    nodes.forEach(n => {
      const c = COLORS[n.type];
      const rgb = n.type==='hub' ? '22,18,13' : n.type==='researcher' ? '74,127,193' : '232,86,10';

      // Glow ring (base)
      if (n.type !== 'hub') {
        cx.beginPath();
        cx.arc(n.x, n.y, n.r + 6, 0, Math.PI*2);
        cx.fillStyle = `rgba(${rgb},0.07)`;
        cx.fill();

        // stronger payment highlight when a payment recently arrived
        if (n.lastPaymentTime) {
          const elapsed = Date.now() - n.lastPaymentTime;
          if (elapsed < 900) {
            const a = 1 - (elapsed / 900);
            cx.beginPath();
            cx.arc(n.x, n.y, n.r + 12 + (a*6), 0, Math.PI*2);
            cx.fillStyle = `rgba(${rgb},${0.12 * a})`;
            cx.fill();
          }
        }
      }

      // Main circle
      cx.beginPath();
      cx.arc(n.x, n.y, n.r, 0, Math.PI*2);
      if (n.type === 'hub') {
        // Hub has ember ring
        const g = cx.createRadialGradient(n.x-2,n.y-2,1, n.x,n.y,n.r);
        g.addColorStop(0,'#3d3628');
        g.addColorStop(1,'#16120d');
        cx.fillStyle = g;
      } else {
        cx.fillStyle = c;
      }
      cx.fill();

      if (n.type === 'hub') {
        cx.strokeStyle = 'rgba(232,86,10,0.8)';
        cx.lineWidth = 2;
        cx.stroke();
      } else {
        cx.strokeStyle = `rgba(${rgb},0.4)`;
        cx.lineWidth = 1;
        cx.stroke();
      }

      // Label
      cx.font = n.type === 'hub'
        ? `bold 9px Manrope, sans-serif`
        : `500 8px Manrope, sans-serif`;
      cx.textAlign = 'center';
      cx.fillStyle = n.type === 'hub' ? '#16120d' : `rgba(${rgb},0.85)`;
      // ensure label Y remains inside canvas bounds
      const pad = Math.max(12, Math.min(40, Math.round(Math.min(bw, bh) * 0.06)));
      const maxLy = bh - pad - 6;
      const ly = Math.min(n.y + n.r + 14, maxLy);
      cx.fillStyle = n.type === 'hub' ? 'rgba(22,18,13,0.7)' : `rgba(${rgb},0.75)`;
      cx.fillText(n.label, n.x, ly);
    });

    // Hub center label
    cx.font = 'bold 7px Manrope, sans-serif';
    cx.textAlign = 'center';
    cx.fillStyle = 'rgba(240,235,226,0.9)';
    cx.fillText('T', hub.x, hub.y + 2.5);

    requestAnimationFrame(frame);
  }

  window.addEventListener('resize', resize);
  resize();
  spawnPulse();
  frame();
})();

// ═══════════════════════════════════════════════
// 3. EMAIL FORM
// ═══════════════════════════════════════════════
document.getElementById('emailBtn').addEventListener('click', function() {
  const inp = document.getElementById('emailIn');
  const row = document.getElementById('emailRow');
  const note = document.getElementById('successNote');
  const val = inp.value.trim();

  if (/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(val)) {
    row.style.display = 'none';
    note.style.display = 'block';
    document.querySelector('.email-label').textContent = 'Thanks! We\'ll be in touch.';
  } else {
    row.style.outline = 'none';
    row.style.borderColor = '#e8560a';
    row.style.boxShadow = '0 0 0 3px rgba(232,86,10,0.12)';
    inp.value = '';
    inp.placeholder = 'Please enter a valid email';
    setTimeout(() => {
      row.style.borderColor = '';
      row.style.boxShadow = '';
      inp.placeholder = 'your@email.com';
    }, 2000);
  }
});

document.getElementById('emailIn').addEventListener('keydown', e => {
  if (e.key === 'Enter') document.getElementById('emailBtn').click();
});
</script>
</body>
</html>